(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{64:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a.n(n),s=a(47),c=a.n(s),l=a(3),o=a(5),i=a(9),u=a(10),m=a(43),h=a(16),p=a(19),d=a(39),g=(a(57),a(65),a(32)),f=d.a.initializeApp({apiKey:"AIzaSyCQAycBu2pZsw_4JQLzRL_aESIis5csHnc",authDomain:"lunar-surface-operations.firebaseapp.com",databaseURL:"https://lunar-surface-operations-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"gs://lunar-surface-operations.appspot.com"}),b=d.a.auth,v=d.a.database(),E=Object(g.b)(f);var y=function(){return r.a.createElement("header",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top",id:"mainNav"},r.a.createElement("div",{className:"container px-4 px-lg-5"},r.a.createElement(p.b,{className:"navbar-brand",to:"/"},"Lunar Surface Operations"),r.a.createElement("button",{className:"navbar-toggler navbar-toggler-right",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"mx-2"},"Menu"),r.a.createElement("i",{className:"fas fa-bars"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarResponsive"},b().currentUser?r.a.createElement("ul",{className:"navbar-nav ms-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{className:"nav-link",to:"/master"},"Master Log")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{className:"nav-link",to:"/log"},"Personal Log")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{className:"nav-link",onClick:function(){return b().signOut()},to:""},"Logout"))):r.a.createElement("ul",{className:"navbar-nav ms-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{className:"nav-link",to:"/login"},"Sign In")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{className:"nav-link ",to:"/signup"},"Sign Up")))))))},N=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"page-top"},r.a.createElement(y,null),r.a.createElement("header",{className:"masthead"},r.a.createElement("div",{className:"container px-4 px-lg-5 d-flex h-100 align-items-center justify-content-center"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h1",{className:"mx-auto mb-3"},"AlfaisalSpaceX"),r.a.createElement(p.b,{className:"btn btn-primary",to:"/master"},"Master Log"))))))}}]),a}(n.Component),S=a(0),w=a.n(S),j=a(2),k=a(13),O=a(67);function x(e){return C.apply(this,arguments)}function C(){return(C=Object(j.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(g.c)(E,"files/"+Object(O.a)()+"-"+t.name),e.next=3,Object(g.d)(a,t);case 3:return e.next=5,Object(g.a)(a).then((function(e){var t=new XMLHttpRequest;return t.responseType="blob",t.onload=function(e){return t.response},t.open("GET",e),t.send(),e}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=a(50),I=a.n(L),D=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={user:b().currentUser,logs:[],content:"",readError:null,writeError:null,loadingLogs:!1,file:"",fileDownloadLink:""},n.handleChange=n.handleChange.bind(Object(k.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(k.a)(n)),n.handleUpload=n.handleUpload.bind(Object(k.a)(n)),n.myRef=r.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(j.a)(w.a.mark((function e(){var t,a=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({readError:null,loadingLogs:!0}),t=this.myRef.current;try{v.ref("logs").on("value",(function(e){var n=[];e.forEach((function(e){n.push(e.val())})),n.sort((function(e,t){return e.timestamp-t.timestamp})),a.setState({logs:n}),t.scrollBy(0,t.scrollHeight),a.setState({loadingLogs:!1})})),null!==this.state.user&&this.state.user.providerData.forEach((function(e){console.log("Sign-in provider: "+e.providerId),console.log("  Provider-specific UID: "+e.uid),console.log("  Name: "+e.displayName),console.log("  Email: "+e.email),console.log("  Photo URL: "+e.photoURL)}))}catch(n){this.setState({readError:n.message,loadingLogs:!1})}case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(){var e=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({content:t.target.value});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(j.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({writeError:null}),a=this.myRef.current,e.prev=3,e.next=6,x(this.state.file);case 6:return this.state.fileDownloadLink=e.sent,e.next=9,v.ref("logs").push({content:this.state.content,timestamp:Date.now(),uid:this.state.user.uid,uemail:this.state.user.email,fileDownloadLink:this.state.fileDownloadLink});case 9:this.setState({content:""}),a.scrollBy(0,a.scrollHeight),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0),this.setState({writeError:e.t0.message});case 17:case"end":return e.stop()}}),e,this,[[3,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleUpload",value:function(){var e=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I()(".custom-file-label").addClass("selected").html(t.target.files[0].name),this.state.file=t.target.files[0];case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"formatTime",value:function(e){var t=new Date(e);return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear()," ").concat(t.getHours(),":").concat(t.getMinutes())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"console"},r.a.createElement(y,null),r.a.createElement("div",{className:"container-fluid log-area",ref:this.myRef},r.a.createElement("h1",null,"Personal Log"),this.state.loadingLogs?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border text-success",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):"",r.a.createElement("pre",null,r.a.createElement("output",null,"Timestamp       | User                | Log",this.state.logs.map((function(t){return e.state.user.uid!==t.uid?null:r.a.createElement("p",{key:t.timestamp,className:e.state.user.uid===t.uid?"text-info":""},e.formatTime(t.timestamp)," | ",t.uemail," | ",t.content,r.a.createElement("br",null),r.a.createElement("a",{href:t.fileDownloadLink,target:"_blank",rel:"noopener noreferrer"},"Download Attachment"))}))))),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-8"},r.a.createElement("textarea",{className:"form-control",name:"content",onChange:this.handleChange,value:this.state.content})),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",onChange:function(t){e.handleUpload(t)}}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},"Choose file")))),this.state.error?r.a.createElement("p",{className:"text-danger"},this.state.error):null,r.a.createElement("button",{type:"submit",className:"btn btn-primary px-5 mt-4"},"Log"))))}}]),a}(n.Component),U=a(6);function R(){var e=new b.GoogleAuthProvider;return b().signInWithPopup(e)}function A(){var e=new b.GithubAuthProvider;return b().signInWithPopup(e)}var M=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={error:null,email:"",password:""},e.handleChange=e.handleChange.bind(Object(k.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(k.a)(e)),e.googleSignIn=e.googleSignIn.bind(Object(k.a)(e)),e.githubSignIn=e.githubSignIn.bind(Object(k.a)(e)),e}return Object(o.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(U.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({error:""}),e.prev=2,e.next=5,a=this.state.email,n=this.state.password,b().createUserWithEmailAndPassword(a,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.setState({error:e.t0.message});case 10:case"end":return e.stop()}var a,n}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"googleSignIn",value:function(){var e=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.setState({error:e.t0.message});case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"githubSignIn",value:function(){var e=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0),this.setState({error:e.t0.message});case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("form",{className:"mt-5 py-5 px-5",onSubmit:this.handleSubmit},r.a.createElement("h1",null,"Sign Up to",r.a.createElement(p.b,{className:"title ml-2",to:"/"},"Lunar Surface Operations")),r.a.createElement("p",{className:"lead"},"Fill in the form below to create an account."),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",placeholder:"Email",name:"email",type:"email",onChange:this.handleChange,value:this.state.email})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",placeholder:"Password",name:"password",onChange:this.handleChange,value:this.state.password,type:"password"})),r.a.createElement("div",{className:"form-group"},this.state.error?r.a.createElement("p",{className:"text-danger"},this.state.error):null,r.a.createElement("button",{className:"btn btn-primary px-5",type:"submit"},"Sign up")),r.a.createElement("p",null,"You can also sign up with any of these services"),r.a.createElement("button",{className:"btn btn-danger mr-2",type:"button",onClick:this.googleSignIn},"Sign up with Google"),r.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:this.githubSignIn},"Sign up with GitHub"),r.a.createElement("hr",null),r.a.createElement("p",null,"Already have an account? ",r.a.createElement(p.b,{to:"/login"},"Login"))))}}]),a}(n.Component),P=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={error:null,email:"",password:""},e.handleChange=e.handleChange.bind(Object(k.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(k.a)(e)),e.googleSignIn=e.googleSignIn.bind(Object(k.a)(e)),e.githubSignIn=e.githubSignIn.bind(Object(k.a)(e)),e}return Object(o.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(U.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({error:""}),e.prev=2,e.next=5,a=this.state.email,n=this.state.password,b().signInWithEmailAndPassword(a,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.setState({error:e.t0.message});case 10:case"end":return e.stop()}var a,n}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"googleSignIn",value:function(){var e=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.setState({error:e.t0.message});case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"githubSignIn",value:function(){var e=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.setState({error:e.t0.message});case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("form",{className:"mt-5 py-5 px-5",autoComplete:"off",onSubmit:this.handleSubmit},r.a.createElement("h1",null,"Login to",r.a.createElement(p.b,{className:"title ml-2",to:"/"},"Lunar Surface Operations")),r.a.createElement("p",{className:"lead"},"Fill in the form below to login to your account."),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",placeholder:"Email",name:"email",type:"email",onChange:this.handleChange,value:this.state.email})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",placeholder:"Password",name:"password",onChange:this.handleChange,value:this.state.password,type:"password"})),r.a.createElement("div",{className:"form-group"},this.state.error?r.a.createElement("p",{className:"text-danger"},this.state.error):null,r.a.createElement("button",{className:"btn btn-primary px-5",type:"submit"},"Login")),r.a.createElement("p",null,"You can also log in with any of these services"),r.a.createElement("button",{className:"btn btn-danger mr-2",type:"button",onClick:this.googleSignIn},"Sign in with Google"),r.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:this.githubSignIn},"Sign in with GitHub"),r.a.createElement("hr",null),r.a.createElement("p",null,"Don't have an account? ",r.a.createElement(p.b,{to:"/signup"},"Sign up"))))}}]),a}(n.Component),H=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={user:b().currentUser,logs:[],content:"",readError:null,writeError:null,loadingLogs:!1},n.handleChange=n.handleChange.bind(Object(k.a)(n)),n.myRef=r.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(j.a)(w.a.mark((function e(){var t,a=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({readError:null,loadingLogs:!0}),t=this.myRef.current;try{v.ref("logs").on("value",(function(e){var n=[];e.forEach((function(e){n.push(e.val())})),n.sort((function(e,t){return e.timestamp-t.timestamp})),a.setState({logs:n}),t.scrollBy(0,t.scrollHeight),a.setState({loadingLogs:!1})}))}catch(n){this.setState({readError:n.message,loadingLogs:!1})}case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(){var e=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({content:t.target.value});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"formatTime",value:function(e){var t=new Date(e);return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear()," ").concat(t.getHours(),":").concat(t.getMinutes())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"console"},r.a.createElement(y,null),r.a.createElement("div",{className:"container-fluid log-area",ref:this.myRef},r.a.createElement("h1",null,"Master Log"),this.state.loadingLogs?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-border text-success",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))):"",r.a.createElement("pre",null,r.a.createElement("output",null,"Timestamp       | User                | Log",this.state.logs.map((function(t){return r.a.createElement("p",{key:t.timestamp,className:e.state.user.uid===t.uid?"text-info":""},e.formatTime(t.timestamp)," | ",t.uemail," | ",t.content,r.a.createElement("br",null),r.a.createElement("a",{href:t.fileDownloadLink,target:"_blank",rel:"noopener noreferrer"},"Download Attachment"))}))))))}}]),a}(n.Component),T=a(44),F=Object(T.a)();Object(T.b)(F.currentUser,{displayName:"Jane Q. User"}).then((function(){})).catch((function(e){}));n.Component;var G=["component","authenticated"],B=["component","authenticated"];function J(e){var t=e.component,a=e.authenticated,n=Object(m.a)(e,G);return r.a.createElement(h.b,Object.assign({},n,{render:function(e){return!0===a?r.a.createElement(t,e):r.a.createElement(h.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}function W(e){var t=e.component,a=e.authenticated,n=Object(m.a)(e,B);return r.a.createElement(h.b,Object.assign({},n,{render:function(e){return!1===a?r.a.createElement(t,e):r.a.createElement(h.a,{to:"/"})}}))}var Y=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={authenticated:!1,loading:!0},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;b().onAuthStateChanged((function(t){t?e.setState({authenticated:!0,loading:!1}):e.setState({authenticated:!1,loading:!1})}))}},{key:"render",value:function(){return!0===this.state.loading?r.a.createElement("div",{className:"spinner-border text-info center-spinner",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):r.a.createElement(p.a,null,r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",component:N}),r.a.createElement(J,{path:"/log",authenticated:this.state.authenticated,component:D}),r.a.createElement(J,{path:"/master",authenticated:this.state.authenticated,component:H}),r.a.createElement(W,{path:"/signup",authenticated:this.state.authenticated,component:M}),r.a.createElement(W,{path:"/login",authenticated:this.state.authenticated,component:P})))}}]),a}(n.Component),_=document.getElementById("root");c.a.render(r.a.createElement(Y,null),_)}},[[64,1,2]]]);
//# sourceMappingURL=main.797a26d5.chunk.js.map